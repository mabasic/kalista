#!/usr/bin/env php

<?php

use Illuminate\Filesystem\Filesystem;
use Mabasic\Kalista\Services\FileBot\FileBot;
use Symfony\Component\Console\Application;

if (file_exists(__DIR__ . '/vendor/autoload.php'))
{
    // For development purposes
    require __DIR__ . '/vendor/autoload.php';
} else
{
    // This is important because of bin executable
    require __DIR__ . '/../../autoload.php';
}

$app = new Application('Kalista', '0.7.0');

$allowed_extensions = ['avi', 'mp4', 'mkv'];

$filebot = new FileBot;
$filesystem = new Filesystem;

$app->add(new Mabasic\Kalista\Movies\OrganizeCommand($allowed_extensions, $filebot, $filesystem));
$app->add(new Mabasic\Kalista\Movies\RenameCommand($allowed_extensions, $filebot, $filesystem));

$app->add(new Mabasic\Kalista\TVShows\OrganizeCommand($allowed_extensions, $filebot, $filesystem));

$app->run();